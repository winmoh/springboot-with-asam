grammar org.xtext.example.asam.Asam with org.eclipse.xtext.common.Terminals

generate asam "http://www.xtext.org/example/asam/Asam"

Sboot:
    'grammar' name=ID
    configuration=Configuration?
    elements+=Element*;

Element:
    Entity | Service | Controller | DTO | Repository;

Configuration:
    'config' '{'
        server=ServerInfo?
        database=DatabaseInfo?
    '}';

ServerInfo:
    'server' '{'
        ('port' port=INT)?
        ('cpath' path=PATH)?
    '}';

DatabaseInfo:
    'database' '{'
        'dbms' type=RDBMS
        'dname' name=ID
        'dport' port=INT
        'username' username=ID
        'password' password=ID
    '}';

Entity:
    'entity' name=ID ('inherits' extends=[Entity])? '{'
        properties+=Property*
    '}';

DTO:
    'dto' name=ID '{'
        properties+=Property*
    '}';

Service:
    'service' name=ID 'pertainingTo' entity=[Controller] '{'
        actions+=ServiceAction*
    '}';

Controller:
    'controller' name=ID 'mappingTo' entity=[Entity] '{'
        baseUrl=STRING?
        actions+=ControllerAction*
    '}';

Repository:
    'repository' name=ID 'for' entity=[Entity] '{'
        methods+=RepositoryMethod*
    '}';

RepositoryMethod:
    FindByMethod | DeleteByMethod | CustomQueryMethod;

FindByMethod:
    'find' 'by' property=ID 'And' prop=ID;

DeleteByMethod:
    'delete' 'by' property=ID 'And' prop=ID;

CustomQueryMethod:
    'customQuery' '{' query=STRING '}';

ServiceAction:
    'operation' name=ID '{'
        'returns' returnType=RType
        ('raises' exceptionType=Type)?
        ('implementation' implementation=STRING)?
        'params' '(' (parameters+=ActionParameter)* ')'
    '}';

ControllerAction:
    method=HttpMethods 'action' name=ID '{'
        'linkedTo' serviceAction=ID
        ('mappedAt' url=STRING)?
        parameters+=ActionParameter*
    '}';

ActionParameter:
    name=ID ':' type=Type ('default' defaultValue=STRING)?;

Property:
    name=ID ':' type=Type ('default' defaultValue=STRING)?;

Type:
    Vtypes=VTypes | ListType | SetType;

RType:
    Vypes=VTypes | ListType | ID;

ListType: 'List<' type=Type '>';
SetType: 'Set<' type=Type '>';

terminal PATH: '/[a-zA-Z0-9_\\/-]+/';

enum VTypes: FLOAT='float' | LONG="long" | INTEGER="int" | CHAR="char" | BOOLEAN="boolean" | BYTE="byte" | STRING="String";

enum HttpMethods: GET="Get" | DELETE="Delete" | POST="Post" | PUT="Put" | PATCH="Patch";

enum RDBMS: MYSQL="Mysql" | POSTGRES="Postgres" | MARIADB="Mariadb" | H2="h2" | ORACLE="Oracle";
